# 关系数据库

关系数据库由表的集合构成，每个表有唯一的名字。表中的一行代表了一组值之间的一种联系。

在关系模型的术语中，关系(relation)用来指代表，而元组(tuple)用来指代行，属性(attribute)指表中的列。关系实例(relation instance)表示一个关系的特定实例，也就是所包含的一组特定的行。对于关系的每个属性，都存在一个允许取值的范围，称为该属性的域(domain)。

# 码

一个关系中没有两个元组在所有属性上的值相同，因此一个元组的属性值必须要能够唯一区分元组。

- **超码**：一个或多个属性的集合，这些属性的组合可以在一个关系中唯一地标识一个元组。超码中可以包含无关紧要的属性，如果 k 是一个超码，那么 k 的任意超集也是超码。
- **候选码**：任意真子集都不能成为超码的超码，也即最小超码。有可能有多个不同的属性集都可以做候选码。
- **主码**：被数据库设计者选中的，主要用来在一个关系中区分不同元组的候选码。主码的选择必须慎重，应该选择那些值从来不变或者极少变化的属性。
- **外码**：若一个关系模式（如 r1）可能在它的属性中包括另一个关系模式（如 r2）的**主码**，则这个属性在 r1 上称作参照 r2 的**外码**

# 关系代数

关系代数是一种过程化查询语言，包括一个运算的集合。这些运算以一个或者两个关系作为输入，产生一个新的关系作为结果。关系代数的基本运算有：选择、投影、并、集合差、笛卡尔积和更名。在基本运算外，还有一些其它运算，即集合交、自然连接和赋值。

### 基本关系代数运算

| 基本关系运算 |          解释       |
|------------|--------------------|
|  选择 σ   | 从关系的水平方向进行运算，选择满足给定条件的元组组成新的关系  | 
|  投影 π   | 从关系的垂直方向开始运算，选择关系中的若干列组成新的列          |
|    并    | R,S 具有相同的关系模式，RUS 为属于R或者S的元组|
|  集合差  | R,S 具有相同的关系模式，R-S为属于R但不属于S的元组 |
|  笛卡儿积 | 从两个输入关系中输出所有的元组对（无论它们在共同属性上的取值是否相同）  |
| 更名 ρ  | 将更名运算运用于关系 r，得到一个具有新名字的相同关系 |

### 附加关系代数运算

通过定义一些附加的运算，虽然不能增强关系代数的表达能力，却可以简化一些常用的查询。

|附加关系运算 |          解释       |
|------------|--------------------|
|集合交运算   | R,S具有相同的关系模式，R∩S=R-(R-S) |
|自然连接 ⋈  |  R⋈S 的结果是在R和S中的在它们的公共属性名字上相等的所有元组的组合。 |
| 赋值运算 ←| 类似程序语言中的赋值，将 ← 右侧的表达式的结果赋给左侧的关系变量，该关系变量可以在后续的表达式中使用  |
| 左外链接 ⟕ | R ⟕ S，包含R中所有元组，对每个元组，若在S中有在公共属性名字上相等的元组，则正常连接，若在S中没有在公共属性名字上相等的元组，则依旧保留此元组，并将对应其他列设为NULL |
| 右外链接 ⟖ | R ⟖ S，外连接的结果包含S中所有元组，对每个元组，若在R中有在公共属性名字上相等的元组，则正常连接，若在R中没有在公共属性名字上相等的元组，则依旧保留此元组，并将对应其他列设为NULL。 |
| 全外链接 ⟗ | R ⟗ S，全外连接的结果包含R与S中所有元组，对每个元组，若在另一关系上中有在公共属性名字上相等的元组，则正常连接，若在另一关系上中没有在公共属性名字上相等的元组，则依旧保留此元组，并将对应其他列设为NULL。|